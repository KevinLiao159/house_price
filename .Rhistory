download.packages(testthat)
download.packages("testthat")
library(testthat)
install.packages("testthat")
library(testthat)
?predict
?predict
library(Rpackage)
?average
knitr::opts_chunk
ggplot(data.train, aes(x = LotArea)) + geom_histogram(binwidth = 30)
library(dplyr)
library(ggplot2)
library(caret)
library(iterators)
library(parallel)
library(doMC)
registerDoMC(cores = 4)
source("script/util.R")
setwd("~/Documents/stat159/house_price")
data.train = read.csv("rawData/train.csv")
data.test = read.csv("rawData/test.csv")
data.sample = read.csv("rawData/sample_submission.csv")
# prepocess
data.train$Id <- NULL
data.test.id <- data.test$Id
data.test$Id <- NULL
data.train$data_type = "train"
data.test$data_type = "test"
data.test$SalePrice = 0
data.all = rbind(data.train, data.test)
data.train$data_type = as.factor(data.train$data_type)
data.all$MSSubClass = as.factor(data.all$MSSubClass)
data.all$YearBuilt = as.factor(data.all$YearBuilt)
data.all$YrSold = as.factor(data.all$YrSold)
data.all$GarageYrBlt = as.factor(data.all$GarageYrBlt)
data.all = convert_na_to_factor(data.all)
# split into train, test again
data.train = filter(data.all, data_type == 'train')
data.train$data_type = NULL
data.test = filter(data.all, data_type == 'test')
data.test$data_type = NULL
source("script/util.R")
library(dplyr)
library(ggplot2)
library(caret)
library(iterators)
library(parallel)
library(doMC)
registerDoMC(cores = 4)
source("script/util.R")
# import dataset
data.train = read.csv("rawData/train.csv")
data.test = read.csv("rawData/test.csv")
data.sample = read.csv("rawData/sample_submission.csv")
# prepocess
data.train$Id <- NULL
data.test.id <- data.test$Id
data.test$Id <- NULL
data.train$data_type = "train"
data.test$data_type = "test"
data.test$SalePrice = 0
data.all = rbind(data.train, data.test)
data.train$data_type = as.factor(data.train$data_type)
data.all$MSSubClass = as.factor(data.all$MSSubClass)
data.all$YearBuilt = as.factor(data.all$YearBuilt)
data.all$YrSold = as.factor(data.all$YrSold)
data.all$GarageYrBlt = as.factor(data.all$GarageYrBlt)
data.all = convert_na_to_factor(data.all)
# split into train, test again
data.train = filter(data.all, data_type == 'train')
data.train$data_type = NULL
data.test = filter(data.all, data_type == 'test')
data.test$data_type = NULL
ggplot(data.train, aes(x = LotArea)) + geom_histogram(binwidth = 30)
ggplot(data.train, aes(x = LotArea)) + geom_histogram()
ggplot(data.train, aes(x = LotArea)) + geom_histogram() + scale_x_log10()
ggplot(data.train, aes(x = LotFrontage)) + geom_histogram()
ggplot(data.train, aes(x = LotFrontage)) + geom_histogram() + + scale_x_log10()
ggplot(data.train, aes(x = LotFrontage)) + geom_histogram() + scale_x_log10()
ggplot(data = data.train, aes(y = SalePrice, x = MSSubClass)) +
geom_point()
ggplot(data.train, aes(x = MSSubClass)) + geom_histogram()
ggplot(data = data.train, aes(y = SalePrice, x = MSSubClass)) +
geom_point()
plot(data.train$MSSubClass)
ggplot(data = data.train, aes(y = SalePrice, x = MSSubClass)) +
geom_point()
plot(data.train$MSSubClass)
ggplot(data = data.train, aes(y = SalePrice, x = OverallCond)) +
geom_point()
ggplot(data = data.train, aes(y = SalePrice, x = OverallQual)) +
geom_point()
ggplot(data = data.train, aes(y = SalePrice, x = OverallCond)) +
geom_point()
plot(data.train$SalePrice, data.train$OverallCond)
1e+05
which(data.train$SalePrice > 5e+05 & data.train$OverallCond == 5)
data.train(c(179, 441, 770, 804, 899, 1047, 1170, 1183),)
data.train[c(179, 441, 770, 804, 899, 1047, 1170, 1183),]
which(data.train$SalePrice > 5e+05 & data.train$OverallCond == 5)
which(data.train$SalePrice > 4e+05 & data.train$OverallCond == 5)
data.train[which(data.train$SalePrice > 4e+05 & data.train$OverallCond == 5),]
data.all$multiple <- data.all$SalePrice / data.all$GrLivArea
data.all
order(c(1,2,3,4))
order(c(6,2,3,4))
order(c(8,2,3,4))
order(c(8,2,3,1))
order(c(8,2,3,10))
order(c(8,2,3,10),)
order(c(8,2,3,10))
head(data.all[order(data.all$multiple),])
head(data.all[order(-data.all$multiple),])
head(data.all[order(data.all$multiple),])
nrow(data.all[data.all$SalePrice==0],)
nrow(data.all[data.all$SalePrice==0],)
nrow(data.all[data.all$SalePrice==0,])
nrow(data.all)
head(data.all[order(data.all$multiple),])
head(data.all[order(data.all$multiple),][data.all$data_type=="train",])
nrow(data.train[data.all$SalePrice==0,])
nrow(data.all)
nrow(data.train[data.train$SalePrice==0,])
nrow(data.al)
nrow(data.train)
nrow(data.train)
nrow(data.train[data.train$SalePrice==0,])
head(data.all[order(data.all$multiple),][data.all$data_type=="train",])
plot(data.train$SalePrice, data.train$Neighborhood)
plot(data.train$Neighborhood, data.train$SalePrice)
plot(data.train$Neighborhood, data.train$SalePrice, las = 2)
data.train = filter(data.all, data_type == 'train')
data.train$data_type = NULL
data.test = filter(data.all, data_type == 'test')
data.test$data_type = NULL
plot(data.train$Neighborhood, data.train$multiple, las = 2)
ggplot(data = data.train, aes(y = SalePrice, x = OverallCond)) +
geom_point()
which(data.train$SalePrice > 5e+05 & data.train$OverallCond == 5)
data.train[c(179, 441, 770, 804, 899, 1047, 1170, 1183),]
ggplot(data = data.train, aes(y = SalePrice, x = OverallQual)) +
geom_point()
plot(data.train$Neighborhood, data.train$multiple, las = 2)
plot(data.train$MSSubClass)
ggplot(data = data.train, aes(y = SalePrice, x = LotFrontage)) +
geom_point()
ggplot(data.train, aes(x = LotFrontage)) + geom_histogram() + scale_x_log10()
ggplot(data = data.train, aes(y = SalePrice, x = YearBuilt)) +
geom_point()
ggplot(data.train, aes(x = YearBuilt)) + geom_histogram()
ggplot(data.train, aes(x = YearBuilt)) + geom_histogram()
ggplot(data = data.train, aes(y = SalePrice, x = YearBuilt)) +
geom_point()
ggplot(data.train, aes(x = YearBuilt)) + geom_bar()
ggplot(data = data.train, aes(y = SalePrice, x = YearBuilt)) +
geom_point()
data.all$YearBuilt <- scale(data.all$YearBuilt, center = TRUE, scale = TRUE)
data.all$YearBuilt <- scale(data.all$YearBuilt, center = TRUE, scale = TRUE)
data.all$YearBuilt <- scale(as.numeric(data.all$YearBuilt), center = TRUE, scale = TRUE)
data.train = filter(data.all, data_type == 'train')
data.train$data_type = NULL
data.test = filter(data.all, data_type == 'test')
data.test$data_type = NULL
data.train = filter(data.all, data_type == 'train')
data.train$data_type = NULL
data.test = filter(data.all, data_type == 'test')
data.test = filter(data.all, data_type == 'test')
View(data.all)
View(data.train)
data.train = filter(data.all, data_type == 'train')
data.train$data_type = NULL
data.train = filter(data.all, data_type == 'train')
sapply(data.all, class)
data.train = filter(data.all, data_type == 'train')
ggplot(data = data.all[data.all$data_type == "train", ], aes(y = SalePrice, x = YearBuilt)) +
geom_point()
ggplot(data.all[data.all$data_type == "train", ], aes(x = YearBuilt)) + geom_bar()
ggplot(data.all[data.all$data_type == "train", ], aes(x = YearBuilt)) + geom_bar() + scale_x_log10()
ggplot(data.all[data.all$data_type == "train", ], aes(x = YearBuilt)) + geom_bar()
data.train = read.csv("rawData/train.csv")
data.test = read.csv("rawData/test.csv")
data.sample = read.csv("rawData/sample_submission.csv")
ggplot(data = data.all[data.all$data_type == "train", ], aes(y = SalePrice, x = YearBuilt)) +
geom_point()
data.train = read.csv("rawData/train.csv")
data.test = read.csv("rawData/test.csv")
data.sample = read.csv("rawData/sample_submission.csv")
data.train = read.csv("rawData/train.csv")
data.test = read.csv("rawData/test.csv")
data.sample = read.csv("rawData/sample_submission.csv")
data.train$Id <- NULL
data.test.id <- data.test$Id
data.test$Id <- NULL
data.train$data_type = "train"
data.test$data_type = "test"
data.test$SalePrice = 0
data.all = rbind(data.train, data.test)
data.train$data_type = as.factor(data.train$data_type)
data.all$MSSubClass = as.factor(data.all$MSSubClass)
data.all$YearBuilt = as.factor(data.all$YearBuilt)
data.all$YrSold = as.factor(data.all$YrSold)
data.all$GarageYrBlt = as.factor(data.all$GarageYrBlt)
data.all = convert_na_to_factor(data.all)
data.train = filter(data.all, data_type == 'train')
data.train$data_type = NULL
data.test = filter(data.all, data_type == 'test')
data.test$data_type = NULL
data.tmp <- select(data.train, MiscFeature, SalePrice)
data.tmp$MiscFeature_exist <- !is.na(data.tmp$MiscFeature)
data.numeric = get_only_numerical_predictors(data.all)
data.numeric %>% head
data.all$multiple <- data.all$SalePrice / data.all$GrLivArea
data.train = filter(data.all, data_type == 'train')
data.train$data_type = NULL
data.test = filter(data.all, data_type == 'test')
data.test$data_type = NULL
mean(as.numeric(data.all$YearBuilt))
head(data.all$YearBuilt)
summary(data.all$YearBuilt)
mean(as.numeric(data.all$YearBuilt))
plot(data.all$YearBuilt)
data.train = read.csv("rawData/train.csv")
data.test = read.csv("rawData/test.csv")
data.sample = read.csv("rawData/sample_submission.csv")
data.train$Id <- NULL
data.test.id <- data.test$Id
data.test$Id <- NULL
data.train$data_type = "train"
data.test$data_type = "test"
data.test$SalePrice = 0
data.all = rbind(data.train, data.test)
data.train$data_type = as.factor(data.train$data_type)
data.all$YrSold = as.factor(data.all$YrSold)
data.all$GarageYrBlt = as.factor(data.all$GarageYrBlt)
data.all = convert_na_to_factor(data.all)
data.all$MSSubClass = as.factor(data.all$MSSubClass)
class(data.all$YearBuilt)
mean(data.all$YearBuilt)
data.train = read.csv("rawData/train.csv")
data.test = read.csv("rawData/test.csv")
data.sample = read.csv("rawData/sample_submission.csv")
data.train$Id <- NULL
data.test.id <- data.test$Id
data.test$Id <- NULL
data.train$data_type = "train"
data.test$data_type = "test"
data.test$SalePrice = 0
data.all = rbind(data.train, data.test)
data.train$data_type = as.factor(data.train$data_type)
data.all$MSSubClass = as.factor(data.all$MSSubClass)
data.all$YearBuilt = as.factor(data.all$YearBuilt)
data.all$YrSold = as.factor(data.all$YrSold)
data.all$GarageYrBlt = as.factor(data.all$GarageYrBlt)
data.all = convert_na_to_factor(data.all)
data.train = filter(data.all, data_type == 'train')
data.train$data_type = NULL
data.test = filter(data.all, data_type == 'test')
data.test$data_type = NULL
data.tmp <- select(data.train, MiscFeature, SalePrice)
data.tmp$MiscFeature_exist <- !is.na(data.tmp$MiscFeature)
data.numeric = get_only_numerical_predictors(data.all)
data.numeric %>% head
data.all$multiple <- data.all$SalePrice / data.all$GrLivArea
data.train$Id <- NULL
data.test.id <- data.test$Id
data.test$Id <- NULL
data.train$data_type = "train"
data.test$data_type = "test"
data.test$SalePrice = 0
data.all = rbind(data.train, data.test)
data.train$data_type = as.factor(data.train$data_type)
data.all$MSSubClass = as.factor(data.all$MSSubClass)
#data.all$YearBuilt = as.factor(data.all$YearBuilt)
data.all$YrSold = as.factor(data.all$YrSold)
data.all$GarageYrBlt = as.factor(data.all$GarageYrBlt)
data.all = convert_na_to_factor(data.all)
data.train = filter(data.all, data_type == 'train')
data.train$data_type = NULL
data.test = filter(data.all, data_type == 'test')
data.test$data_type = NULL
data.tmp <- select(data.train, MiscFeature, SalePrice)
data.tmp$MiscFeature_exist <- !is.na(data.tmp$MiscFeature)
data.numeric = get_only_numerical_predictors(data.all)
data.numeric %>% head
data.all$multiple <- data.all$SalePrice / data.all$GrLivArea
data.all$Year <- c()
for (i in 1:nrow(data.all)) {
if (data.all$YearBuilt[i] > 1945) {
data.all$Year <- 0
} else {
data.all$Year <- 0
}
}
data.all$Year <- c()
for (i in 1:nrow(data.all)) {
if (data.all$YearBuilt[i] > 1945) {
data.all$Year <- 1
} else {
data.all$Year <- 0
}
}
data.train = read.csv("rawData/train.csv")
data.test = read.csv("rawData/test.csv")
data.sample = read.csv("rawData/sample_submission.csv")
data.train$Id <- NULL
data.test.id <- data.test$Id
data.test$Id <- NULL
data.train$data_type = "train"
data.test$data_type = "test"
data.test$SalePrice = 0
data.all = rbind(data.train, data.test)
data.train$data_type = as.factor(data.train$data_type)
data.all$MSSubClass = as.factor(data.all$MSSubClass)
#data.all$YearBuilt = as.factor(data.all$YearBuilt)
data.all$YrSold = as.factor(data.all$YrSold)
data.all$GarageYrBlt = as.factor(data.all$GarageYrBlt)
data.all = convert_na_to_factor(data.all)
data.train = filter(data.all, data_type == 'train')
data.train$data_type = NULL
data.test = filter(data.all, data_type == 'test')
data.test$data_type = NULL
data.numeric = get_only_numerical_predictors(data.all)
data.numeric %>% head
data.tmp <- select(data.train, MiscFeature, SalePrice)
data.tmp$MiscFeature_exist <- !is.na(data.tmp$MiscFeature)
data.all$multiple <- data.all$SalePrice / data.all$GrLivArea
data.all$Year <- c()
for (i in 1:nrow(data.all)) {
if (data.all$YearBuilt[i] > 1945) {
data.all$Year <- 1
} else {
data.all$Year <- 0
}
}
data.train = filter(data.all, data_type == 'train')
data.train$data_type = NULL
data.test = filter(data.all, data_type == 'test')
data.test$data_type = NULL
ggplot(data = data.train, aes(y = SalePrice, x = Year)) +
geom_point()
ggplot(data.train, aes(x = Year)) + geom_bar()
ggplot(data = data.train, aes(y = SalePrice, x = Year)) +
geom_point()
data.all$Year <- c()
for (i in 1:nrow(data.all)) {
if (data.all$YearBuilt[i] > 1945) {
data.all$Year <- 1
} else {
data.all$Year <- 0
}
}
min(data.all$Year)
summm
summary(data.all$YearBuilt)
data.all$Year <- c()
for (i in 1:nrow(data.all)) {
if (data.all$YearBuilt[i] > 1945) {
data.all[i]$Year <- 1
} else {
data.all[i]$Year <- 0
}
}
data.all$Year <- c()
for (i in 1:nrow(data.all)) {
if (data.all$YearBuilt[i] > 1945) {
data.all[i]$Year <- 1
} else {
data.all[i]$Year <- 0
}
}
data.all$Year <- c()
for (i in 1:nrow(data.all)) {
if (data.all$YearBuilt[i] > 1945) {
data.all$Year[i] <- 1
} else {
data.all$Year[i] <- 0
}
}
data.train = filter(data.all, data_type == 'train')
data.train$data_type = NULL
data.test = filter(data.all, data_type == 'test')
data.test$data_type = NULL
ggplot(data = data.train, aes(y = SalePrice, x = Year)) +
geom_point()
ggplot(data.train, aes(x = Year)) + geom_bar()
